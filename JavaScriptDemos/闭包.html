
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<script>
    window.onload=function(){ 
//闭包应用-点击li输出当前li的索引号
  //1.我们可以利用动态添加属性的方式 
  var  lis=document.querySelector('.nav').querySelectorAll('li')
//         for(var i=0;i<lis.length;i++){
//           lis[i].index=i;
//           lis[i].onclick=function(){
//               console.log(this.index);
//           }
//   }
  //2.利用闭包的方式得到li的索引号（面试经典题）
    //       for(var i=0;i<lis.length;i++){
    // //利用for循环创建了4个立即执行函数：格式（function(）{alert（'我是一个立即执行函数'）}）（） 
    // //立即执行函数相当于一个小闭包
    //          (function(i){
    //                 lis[i].onclick=function(){
    //                     console.log(i);
    //                 }
    //             })(i);
    // }
   //3.利用闭包引用-在3秒中之后打印所有li元素的内容
        for(var i=0;i<lis.length;i++){
            (function(i){
            setTimeout(function(){
            console.log(lis[i].innerHTML)
            },3000)
            })(i)
        }
//4. // 闭包应用-计算打车价格 
        // 打车起步价13(3公里内),  之后每多一公里增加 5块钱.  用户输入公里数就可以计算打车价格
        // 如果有拥堵情况,总价格多收取10块钱拥堵费
        // function fn() {};
        // fn();
        // var car = (function() {
        //     var start = 13; // 起步价  局部变量
        //     var total = 0; // 总价  局部变量
        //     return {
        //         // 正常的总价
        //         price: function(n) {
        //             if (n <= 3) {
        //                 total = start;
        //             } else {
        //                 total = start + (n - 3) * 5
        //             }
        //             return total;
        //         },
        //         // 拥堵之后的费用
        //         yd: function(flag) {
        //             return flag ? total + 10 : total;
        //         }
        //     }
        // })();
        // console.log(car.price(5)); // 23
        // console.log(car.yd(true)); // 33
        // console.log(car.price(1)); // 13
        // console.log(car.yd(false)); // 13
  
    }   
</script>
<body>
<!--
闭包：指有权访问另一个函数作用域中变量的函数
一个作用域可以访问另一个函数的局部变量
闭包的主要作用：延伸了变量的作用范围 
-->
 <ul class="nav">
    <li>榴莲</li>
    <li>臭豆腐</li>
    <li>鱼罐头</li>
    <li>猪肉</li>
</ul> 
</body>
</html>